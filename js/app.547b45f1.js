(function(t){function e(e){for(var a,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/thingy-client-purple/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"thingy-client"}},[t.$auth.isAuthenticated?n("v-navigation-drawer",{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("NavBarComponent")],1):t._e(),n("v-app-bar",{attrs:{app:"",dark:""}},[t.$auth.isAuthenticated?n("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}):t._e(),n("div",{staticClass:"flex-grow-1"}),n("LoginComponent")],1),n("v-content",[n("router-view")],1),n("v-footer",{attrs:{app:""}},[n("span",{staticClass:"white--text"},[t._v("Â© 2019")])])],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{to:"/"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-view-dashboard")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Monitor")])],1)],1),n("v-list-item",{attrs:{to:"/workflow"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-calendar-clock")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Calendar")])],1)],1),n("v-list-item",{attrs:{to:"/settings"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-settings")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Settings")])],1)],1)],1)},s=[],c={name:"NavBarComponent",data:function(){return{drawer:null,right:null}},methods:{login:function(){this.$auth.loginWithRedirect()},logout:function(){this.$auth.logout({returnTo:window.location.origin})}}},l=c,u=n("2877"),d=n("6544"),h=n.n(d),m=n("132d"),p=n("8860"),v=n("da13"),f=n("5d23"),g=n("34c3"),y=Object(u["a"])(l,o,s,!1,null,null,null),b=y.exports;h()(y,{VIcon:m["a"],VList:p["a"],VListItem:v["a"],VListItemContent:f["a"],VListItemIcon:g["a"],VListItemTitle:f["c"]});var w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$auth.loading?t._e():[t.$auth.isAuthenticated?[n("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({staticClass:"mx-2",attrs:{icon:"",dark:""}},a),[n("v-avatar",{attrs:{size:"36"}},[n("img",{attrs:{src:t.$auth.user.picture,alt:t.$auth.user.name}})])],1)]}}],null,!1,1939794592)},[n("v-list",[n("v-list-item",{on:{click:t.logout}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-logout")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Logout")])],1)],1)],1)],1)]:n("v-btn",{attrs:{outlined:""},on:{click:t.login}},[n("v-icon",[t._v("mdi-login")]),t._v(" Login ")],1)]],2)},x=[],_={name:"LoginComponent",data:function(){return{drawer:null,right:null}},methods:{login:function(){},logout:function(){this.$auth.logout({returnTo:window.location.origin})}}},C=_,I=n("8212"),V=n("8336"),T=n("e449"),k=Object(u["a"])(C,w,x,!1,null,null,null),D=k.exports;h()(k,{VAvatar:I["a"],VBtn:V["a"],VIcon:m["a"],VList:p["a"],VListItem:v["a"],VListItemContent:f["a"],VListItemIcon:g["a"],VListItemTitle:f["c"],VMenu:T["a"]});var O={components:{NavBarComponent:b,LoginComponent:D},data:function(){return{drawer:null,right:null}},created:function(){this.$vuetify.theme.dark=!0}},$=O,S=n("7496"),R=n("40dc"),j=n("5bc1"),P=n("a75b"),A=n("553a"),E=n("f774"),L=Object(u["a"])($,i,r,!1,null,null,null),M=L.exports;h()(L,{VApp:S["a"],VAppBar:R["a"],VAppBarNavIcon:j["a"],VContent:P["a"],VFooter:A["a"],VNavigationDrawer:E["a"]});n("4de4"),n("caad"),n("d81d"),n("accc"),n("0d03"),n("2532");var B=n("2f62"),W=n("b166");a["default"].use(B["a"]);var N=new B["a"].Store({state:{startDate:new Date,endDate:new Date,devices:[],selectedDevice:[],plants:[],selectedPlants:[]},getters:{dateRangeText:function(t){return Object(W["a"])(t.startDate,"d. MMM yy")+" ~ "+Object(W["a"])(t.endDate,"d. MMM yyy")},dateRangeISO:function(t){return[t.startDate.toISOString().substr(0,10),t.endDate.toISOString().substr(0,10)]},devices:function(t){return t.devices},plants:function(t){return t.plants},plantsWithThings:function(t){var e=t.plants.map((function(e){return Object.assign(e,{thing:t.devices.filter((function(t){return t.id===e.thing_id})).shift()})}));return e},thingys:function(t){return t.devices.map((function(t){return t.location}))},selectedThingys:function(t){return t.selectedDevice.location},selectedDevice:function(t){return t.selectedDevice},selectedPlants:function(t){return t.selectedPlants}},mutations:{setDates:function(t,e){if(1==e.length)t.startDate=new Date(e[0]),t.endDate=t.startDate;else{var n=new Date(e[0]),a=new Date(e[1]);t.startDate=n<=a?n:a,t.endDate=n>a?n:a}},selectDevice:function(t,e){t.selectedDevice=t.devices.filter((function(t){return e===t.id}))[0]},setThingys:function(t,e){t.devices=e,t.selectedDevice=t.devices[0]},setPlants:function(t,e){t.plants=e,t.selectedPlants=t.plants},selectPlants:function(t,e){t.selectedPlants=t.plants.filter((function(t){return e.includes(t.id)}))}},actions:{}}),U=n("f309");a["default"].use(U["a"]);var F=new U["a"]({icons:{iconfont:"mdi"}}),z=n("8c4f"),H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("TODO Make some nice welcome page for when not logged in.")])},G=[],J={name:"Home",components:{},methods:{login:function(){this.$auth.loginWithRedirect()},logout:function(){this.$auth.logout({returnTo:window.location.origin})}}},K=J,q=Object(u["a"])(K,H,G,!1,null,null,null),Q=q.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"space-around"}},[n("v-col",{attrs:{lg:"5",cols:"7"}},[n("ThingyTableComponent")],1),n("v-col",{attrs:{cols:"7"}},[n("v-list-item",[n("PlantTableComponent")],1)],1)],1)],1)},X=[],Z=n("bc3a"),tt=n.n(Z),et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.thingys,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Devices")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[t._v(" New Item ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Location name"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"MAC Address"},model:{value:t.editedItem.mac_address,callback:function(e){t.$set(t.editedItem,"mac_address",e)},expression:"editedItem.mac_address"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var a=e.item;return[n("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[n("v-btn",{attrs:{color:"primary"},on:{click:t.fetchThingys}},[t._v(" Reset ")])]},proxy:!0}])})],1)},nt=[],at=(n("c975"),n("d3b7"),n("4795"),n("96cf"),{name:"ThingyFormComponent",data:function(){return{dialog:!1,headers:[{text:"Thingy (ID)",align:"left",sortable:!0,value:"id"},{text:"Location",value:"location"},{text:"MAC Address",value:"mac_address"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{location:"",mac_address:""},defaultItem:{location:"",mac_address:""}}},watch:{dialog:function(t){t||this.close()}},computed:Object(B["b"])({thingys:function(t){return t.devices},formTitle:function(t){return-1===this.editedIndex?"New Item":"Edit Item"}}),mounted:function(){this.fetchThingys()},methods:{fetchThingys:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$auth.getTokenSilently());case 2:t=n.sent,this.$api.thingys.list({headers:{Authorization:"Bearer "+t}}).then((function(t){200===t.status?e.$store.commit("setThingys",t.data):e.$store.commit("setThingys",[])}))["catch"]((function(t){}));case 4:case"end":return n.stop()}}),null,this)},editItem:function(t){this.editedIndex=this.thingys.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this,n=this.thingys.indexOf(t),a=this.thingys[n];confirm("Are you sure you want to delete this item?")&&this.$api.thingys["delete"](a.id).then((function(t){e.fetchThingys()}))["catch"]((function(t){}))},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},save:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$auth.getTokenSilently());case 2:t=n.sent,this.editedIndex>-1||this.$api.thingys.post(this.editedItem,{headers:{Authorization:"Bearer "+t}}).then((function(t){e.fetchThingys()}))["catch"]((function(t){})),this.close();case 5:case"end":return n.stop()}}),null,this)}}}),it=at,rt=n("b0af"),ot=n("99d9"),st=n("62ad"),ct=n("a523"),lt=n("8fea"),ut=n("169a"),dt=n("ce7e"),ht=n("0fd9"),mt=n("2fa4"),pt=n("8654"),vt=n("71d9"),ft=n("2a7f"),gt=Object(u["a"])(it,et,nt,!1,null,null,null),yt=gt.exports;h()(gt,{VBtn:V["a"],VCard:rt["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCol:st["a"],VContainer:ct["a"],VDataTable:lt["a"],VDialog:ut["a"],VDivider:dt["a"],VIcon:m["a"],VRow:ht["a"],VSpacer:mt["a"],VTextField:pt["a"],VToolbar:vt["a"],VToolbarTitle:ft["a"]});var bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.plants,"sort-by":"calories"},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Plants")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[t._v(" New Item ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{label:"Plant name"},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{type:"Number",label:"Optimal Temperature (Â°C)"},model:{value:t.editedItem.optimal_temperature,callback:function(e){t.$set(t.editedItem,"optimal_temperature",e)},expression:"editedItem.optimal_temperature"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{type:"Number",label:"Optimal Humidity (%)"},model:{value:t.editedItem.optimal_humidity,callback:function(e){t.$set(t.editedItem,"optimal_humidity",e)},expression:"editedItem.optimal_humidity"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-text-field",{attrs:{type:"Number",label:"Watering Interval"},model:{value:t.editedItem.watering_interval_days,callback:function(e){t.$set(t.editedItem,"watering_interval_days",e)},expression:"editedItem.watering_interval_days"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("v-select",{attrs:{items:t.thingyItems,label:"Thingy",required:""},model:{value:t.editedItem.thing_id,callback:function(e){t.$set(t.editedItem,"thing_id",e)},expression:"editedItem.thing_id"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(e){var a=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-settings ")]),n("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[n("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.fetchItems()}}},[t._v(" Load ")])]},proxy:!0}])})],1)},wt=[],xt={name:"ThingyFormComponent",data:function(){return{dialog:!1,headers:[{text:"ID",align:"left",sortable:!0,value:"id"},{text:"Name",value:"name"},{text:"Watering Interval (days)",value:"watering_interval_days"},{text:"Optimal Temperature",value:"optimal_temperature"},{text:"Optimal Humidity Days",value:"optimal_humidity"},{text:"Thing",value:"thing.location"},{text:"Actions",value:"action",sortable:!1}],plants:[],editedIndex:-1,editedItem:{optimal_temperature:0,optimal_humidity:0,watering_interval_days:0,name:"",thing_id:1,thing:{}},defaultItem:{optimal_temperature:0,optimal_humidity:0,watering_interval_days:0,name:"",thing_id:1,thing:{}}}},watch:{dialog:function(t){t||this.close()}},computed:Object(B["b"])({thingyItems:function(t){return t.devices.map((function(t){return{text:t.location,value:t.id}}))},formTitle:function(t){return-1===this.editedIndex?"New Item":"Edit Item"}}),mounted:function(){this.fetchItems()},methods:{fetchItems:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.$api.plants.list({}).then((function(e){200===e.status?(t.$store.commit("setPlants",e.data),t.plants=t.$store.getters.plantsWithThings):t.$store.commit("setPlants",[])}))["catch"]((function(t){}));case 1:case"end":return e.stop()}}),null,this)},editItem:function(t){this.editedIndex=this.plants.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this,n=this.plants.indexOf(t),a=this.plants[n];confirm("Are you sure you want to delete this item?")&&this.$api.plants["delete"](a.id).then((function(t){e.fetchItems()}))["catch"]((function(t){}))},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},save:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$auth.getTokenSilently());case 2:t=n.sent,this.editedIndex>-1?this.$api.plants.put(this.editedItem.id,this.editedItem,{headers:{Authorization:"Bearer "+t}}).then((function(t){e.fetchItems()}))["catch"]((function(t){})):this.$api.plants.post(this.editedItem,{headers:{Authorization:"Bearer "+t}}).then((function(t){e.fetchItems()}))["catch"]((function(t){})),this.close();case 5:case"end":return n.stop()}}),null,this)}}},_t=xt,Ct=n("b974"),It=Object(u["a"])(_t,bt,wt,!1,null,null,null),Vt=It.exports;h()(It,{VBtn:V["a"],VCard:rt["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCol:st["a"],VContainer:ct["a"],VDataTable:lt["a"],VDialog:ut["a"],VDivider:dt["a"],VIcon:m["a"],VRow:ht["a"],VSelect:Ct["a"],VSpacer:mt["a"],VTextField:pt["a"],VToolbar:vt["a"],VToolbarTitle:ft["a"]});var Tt={name:"Profile",components:{ThingyTableComponent:yt,PlantTableComponent:Vt},methods:{},data:function(){return{info:null,url:""}},mounted:function(){}},kt=Tt,Dt=Object(u["a"])(kt,Y,X,!1,null,null,null),Ot=Dt.exports;h()(Dt,{VCol:st["a"],VContainer:ct["a"],VListItem:v["a"],VRow:ht["a"]});var $t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{justify:"space-around"}},[n("v-col",{attrs:{cols:"6"}},[n("PlantsSelectsComponent")],1)],1),n("v-row",[n("v-col",[n("VueCal",{staticStyle:{height:"550px"},attrs:{"hide-view-selector":"","default-view":"month","min-date":t.startDate,"max-date":t.endDate,events:t.events,"events-on-month-view":"short","selected-date":t.startDate,time:!1,"disable-views":["years","year"]}})],1)],1)],1)},St=[],Rt=(n("a4d3"),n("e01a"),n("d28b"),n("b0c0"),n("3ca3"),n("ddb0"),n("7fa7")),jt=n.n(Rt),Pt=(n("b55b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400"}},[n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"headline"},[t._v(" "+t._s(t.thingy)+" ")]),n("v-list-item-subtitle",[t._v("Mon, 12:30 PM, Mostly sunny")])],1)],1),n("v-card-text",[n("v-row",{attrs:{align:"center"}},[n("v-col",{staticClass:"display-3",attrs:{cols:"6"}},[t._v(" 23Â°C ")]),n("v-col",{attrs:{cols:"6"}},[n("v-img",{attrs:{src:"https://cdn.vuetifyjs.com/images/cards/sun.png",alt:"Sunny image",width:"92"}})],1)],1)],1),n("v-list-item",[n("v-list-item-icon",[n("v-icon",[t._v("mdi-send")])],1),n("v-list-item-subtitle",[t._v("23 km/h")])],1),n("v-list-item",[n("v-list-item-icon",[n("v-icon",[t._v("mdi-cloud-download")])],1),n("v-list-item-subtitle",[t._v("48%")])],1),n("v-slider",{staticClass:"mx-4",attrs:{max:6,"tick-labels":t.labels,ticks:""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),n("v-list",{staticClass:"transparent"},t._l(t.forecast,(function(e){return n("v-list-item",{key:e.day},[n("v-list-item-title",[t._v(t._s(e.day))]),n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(e.temp)+" ")])],1)})),1),n("v-divider"),n("v-card-actions",[n("v-btn",{attrs:{text:""}},[t._v(" Full Report ")])],1)],1)}),At=[],Et={name:"WeatherCardComponent",props:{thingy:{type:String,default:""}},data:function(){return{labels:["SU","MO","TU","WED","TH","FR","SA"],time:0,forecast:[{day:"Tuesday",icon:"mdi-white-balance-sunny",temp:"24Â°/12Â°"},{day:"Wednesday",icon:"mdi-white-balance-sunny",temp:"22Â°/14Â°"},{day:"Thursday",icon:"mdi-cloud",temp:"25Â°/15Â°"}]}}},Lt=Et,Mt=n("adda"),Bt=n("ba0d"),Wt=Object(u["a"])(Lt,Pt,At,!1,null,null,null);Wt.exports;h()(Wt,{VBtn:V["a"],VCard:rt["a"],VCardActions:ot["a"],VCardText:ot["b"],VCol:st["a"],VDivider:dt["a"],VIcon:m["a"],VImg:Mt["a"],VList:p["a"],VListItem:v["a"],VListItemContent:f["a"],VListItemIcon:g["a"],VListItemSubtitle:f["b"],VListItemTitle:f["c"],VRow:ht["a"],VSlider:Bt["a"]});var Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("v-container",{attrs:{fluid:""}},[n("v-row",t._l(t.thingys,(function(e){return n("v-col",{key:e.id,attrs:{cols:"12",sm:"4",md:"4"}},[n("h3",[t._v(t._s(e.location))]),t._l(t.plants.filter((function(t){return t.thing_id==e.id})),(function(e){return n("v-checkbox",{key:e.id,attrs:{label:e.name,color:"green",value:e.id,"hide-details":""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})}))],2)})),1)],1)],1)],1)},Ut=[],Ft={name:"PlantsSelectComponent",data:function(){return{selected:this.$store.getters.selectedPlants.map((function(t){return t.id}))}},methods:{fetchItems:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:this.$api.plants.list({}).then((function(e){200===e.status?(t.$store.commit("setPlants",e.data),t.selected=t.$store.getters.selectedPlants.map((function(t){return t.id}))):t.$store.commit("setPlants",[])}))["catch"]((function(t){}));case 1:case"end":return e.stop()}}),null,this)}},watch:{selected:function(t){this.$store.commit("selectPlants",t)}},mounted:function(){this.fetchItems()},computed:Object(B["b"])({thingys:function(t){return t.devices},plants:function(t){return t.plants}})},zt=Ft,Ht=n("ac7c"),Gt=Object(u["a"])(zt,Nt,Ut,!1,null,null,null),Jt=Gt.exports;h()(Gt,{VCard:rt["a"],VCardText:ot["b"],VCheckbox:Ht["a"],VCol:st["a"],VContainer:ct["a"],VRow:ht["a"]});var Kt={name:"Workflow",components:{VueCal:jt.a,PlantsSelectsComponent:Jt},methods:{fetchEvents:function(){var t=this;this.events=[];var e=!0,n=!1,a=void 0;try{for(var i,r=function(){var e=i.value;t.$api.plants.prediction(e.id).then((function(n){if(200===n.status){var a=!0,i=!1,r=void 0;try{for(var o,s=n.data[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value;c.watering&&t.events.push({start:c.date,end:c.date,title:"Water ".concat(e.name),content:"<v-icon>mdi-water-pump</v-icon>",class:"watering"})}}catch(l){i=!0,r=l}finally{try{a||null==s["return"]||s["return"]()}finally{if(i)throw r}}}}))["catch"]((function(t){}))},o=this.$store.getters.selectedPlants[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)r()}catch(s){n=!0,a=s}finally{try{e||null==o["return"]||o["return"]()}finally{if(n)throw a}}}},data:function(){return{info:null,url:"",events:[]}},mounted:function(){this.fetchEvents()},watch:{selectedPlants:function(t){this.fetchEvents()}},computed:Object(B["b"])({startDate:function(t){return t.startDate},endDate:function(t){return t.endDate},selectedPlants:function(t){return t.selectedPlants}})},qt=Kt,Qt=(n("b4b3"),Object(u["a"])(qt,$t,St,!1,null,null,null)),Yt=Qt.exports;h()(Qt,{VCol:st["a"],VContainer:ct["a"],VRow:ht["a"]});var Xt,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-toolbar",[n("v-spacer"),n("DateRangeComponent"),n("ThingyComponent")],1)],1),n("v-row",{attrs:{justify:"center"}},t._l(t.charts,(function(t){return n("v-col",{key:t.property,attrs:{cols:"12",sm:"6"}},[n("keep-alive",[n("ChartComponent",{attrs:{title:t.title,color:t.color,"api-endpoint":t.property}})],1)],1)})),1)],1)],1)},te=[],ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("highcharts",{staticClass:"chart",attrs:{options:t.chartOptions,"update-args":t.updateArgs}})},ne=[],ae=(n("4160"),n("fb6a"),n("a9e3"),n("159b"),n("ade3")),ie=(Xt={name:"ChartComponent",data:function(){return{points:[],chartType:"Spline",seriesColor:this.color,colorInputIsSupported:null,animationDuration:1e3,updateArgs:[!0,!0,!0,{duration:1e3}],chartOptions:{chart:{type:"spline",zoomType:"x"},title:{text:this.title},xAxis:{type:"datetime"},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,this.color],[1,"#ECEFF4"]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{data:[],color:this.color,type:"area",name:this.title}]}}},watch:{seriesColor:function(t){this.chartOptions.series[0].color=t.toLowerCase()},animationDuration:function(t){this.updateArgs[2].duration=Number(t)}},props:{title:{type:String,default:""},color:{type:String,default:"#6fcd98"},apiEndpoint:{type:String,default:""}},created:function(){this.fetchData()}},Object(ae["a"])(Xt,"watch",{selectedDevice:function(t){this.fetchData()},startDate:function(t){this.fetchData()}}),Object(ae["a"])(Xt,"computed",Object(B["b"])({selectedDevice:function(t){return t.selectedDevice},startDate:function(t){return t.startDate},endDate:function(t){return t.endDate}})),Object(ae["a"])(Xt,"methods",{fetchData:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$auth.getTokenSilently());case 2:if(t=n.sent,!this.selectedDevice){n.next=6;break}return n.next=6,regeneratorRuntime.awrap(this.$api.property.get(this.selectedDevice.id,this.apiEndpoint,{params:{start_date:Object(W["a"])(this.startDate,"y-MM-dd"),end_date:Object(W["a"])(this.endDate,"y-MM-dd")},headers:{Authorization:"Bearer "+t}}).then((function(t){var n,a,i=[];t.data.forEach((function(t){a=t.time.slice(0,16),n!==a&&(n=a,i.push([new Date(t.time).getTime(),t.value]))})),e.chartOptions.series[0].data=i}))["catch"]((function(t){})));case 6:case"end":return n.stop()}}),null,this)}}),Xt),re=ie,oe=Object(u["a"])(re,ee,ne,!1,null,"c05964cc",null),se=oe.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-select",{staticClass:"pt-5",attrs:{solo:"",items:t.thingys,label:"Select Devices"},model:{value:t.selectedThingy,callback:function(e){t.selectedThingy=e},expression:"selectedThingy"}})],1)},le=[],ue={name:"ThingyComponent",props:{},data:function(){return{selectedThingy:0}},computed:Object(B["b"])({thingys:function(t){return t.devices.map((function(t){return{text:t.location,value:t.id}}))}}),methods:{fetchItem:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.$auth.getTokenSilently());case 2:t=n.sent,this.$api.thingys.list({headers:{Authorization:"Bearer "+t}}).then((function(t){200===t.status?(e.$store.commit("setThingys",t.data),e.selectedThingy=e.$store.getters.devices[0].id):e.$store.commit("setThingys",[])}))["catch"]((function(t){}));case 4:case"end":return n.stop()}}),null,this)}},mounted:function(){this.fetchItem()},watch:{selectedThingy:function(t){this.$store.commit("selectDevice",t)}}},de=ue,he=Object(u["a"])(de,ce,le,!1,null,null,null),me=he.exports;h()(he,{VSelect:Ct["a"]});var pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":t.dates,transition:"scale-transition","offset-y":"","min-width":"200px"},on:{"update:returnValue":function(e){t.dates=e},"update:return-value":function(e){t.dates=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-text-field",t._g({staticClass:"pt-5",attrs:{solo:"","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n("v-date-picker",{attrs:{scrollable:"","no-title":"",range:""},model:{value:t.dates,callback:function(e){t.dates=e},expression:"dates"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.$store.commit("setDates",t.dates),t.$refs.menu.save(t.dates)}}},[t._v(" OK ")])],1)],1)],1)},ve=[],fe={name:"DateRangeComponent",props:{},data:function(){return{dates:["2019-09-10","2019-09-20"],menu:!1}},created:function(){},computed:{dateRangeText:function(){return this.$store.getters.dateRangeText}},watch:{}},ge=fe,ye=n("2e4b"),be=Object(u["a"])(ge,pe,ve,!1,null,null,null),we=be.exports;h()(be,{VBtn:V["a"],VDatePicker:ye["a"],VMenu:T["a"],VSpacer:mt["a"],VTextField:pt["a"]});var xe={name:"Monitor",data:function(){return{selected:"chart",currentView:"chart",charts:[{title:"Air Quality",color:"#5E81AC",property:"airquality"},{title:"Humidity",color:"#8FBCBB",property:"humidity"},{title:"Temperature",color:"#EBCB8B",property:"temperature"},{title:"Pressure",color:"#4C566A",property:"pressure"}]}},components:{ChartComponent:se,ThingyComponent:me,DateRangeComponent:we},methods:{activate:function(t){this.selected=t},handler:function(){var t=arguments,e=!0,n=!1,a=void 0;try{for(var i,r=t[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;o instanceof Function&&o()}}catch(s){n=!0,a=s}finally{try{e||null==r["return"]||r["return"]()}finally{if(n)throw a}}},select:function(t){this.currentView=t,this.activate(t)}}},_e=xe,Ce=Object(u["a"])(_e,Zt,te,!1,null,null,null),Ie=Ce.exports;h()(Ce,{VCol:st["a"],VContainer:ct["a"],VRow:ht["a"],VSpacer:mt["a"],VToolbar:vt["a"]});n("ac1f"),n("841c");var Ve,Te=n("15fd"),ke=n("5891"),De=n.n(ke),Oe=function(){return window.history.replaceState({},document.title,window.location.pathname)},$e=function(){return Ve},Se=function(t){var e=t.onRedirectCallback,n=void 0===e?Oe:e,i=t.redirectUri,r=void 0===i?window.location.origin+window.location.pathname:i,o=Object(Te["a"])(t,["onRedirectCallback","redirectUri"]);return Ve||(Ve=new a["default"]({data:function(){return{loading:!0,isAuthenticated:!1,user:{},auth0Client:null,popupOpen:!1,error:null}},methods:{loginWithPopup:function(t){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return this.popupOpen=!0,e.prev=1,e.next=4,regeneratorRuntime.awrap(this.auth0Client.loginWithPopup(t));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),console.error(e.t0);case 9:return e.prev=9,this.popupOpen=!1,e.finish(9);case 12:return e.next=14,regeneratorRuntime.awrap(this.auth0Client.getUser());case 14:this.user=e.sent,this.isAuthenticated=!0;case 16:case"end":return e.stop()}}),null,this,[[1,6,9,12]])},handleRedirectCallback:function(){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,regeneratorRuntime.awrap(this.auth0Client.handleRedirectCallback());case 4:return t.next=6,regeneratorRuntime.awrap(this.auth0Client.getUser());case 6:this.user=t.sent,this.isAuthenticated=!0,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),this.error=t.t0;case 13:return t.prev=13,this.loading=!1,t.finish(13);case 16:case"end":return t.stop()}}),null,this,[[1,10,13,16]])},loginWithRedirect:function(t){return this.auth0Client.loginWithRedirect(t)},getIdTokenClaims:function(t){return this.auth0Client.getIdTokenClaims(t)},getTokenSilently:function(t){return this.auth0Client.getTokenSilently(t)},getTokenWithPopup:function(t){return this.auth0Client.getTokenWithPopup(t)},logout:function(t){return this.auth0Client.logout(t)}},created:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(De()({domain:o.domain,client_id:o.clientId,audience:o.audience,redirect_uri:r}));case 2:if(this.auth0Client=a.sent,a.prev=3,!window.location.search.includes("code=")||!window.location.search.includes("state=")){a.next=10;break}return a.next=7,regeneratorRuntime.awrap(this.auth0Client.handleRedirectCallback());case 7:t=a.sent,e=t.appState,n(e);case 10:a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](3),this.error=a.t0;case 15:return a.prev=15,a.next=18,regeneratorRuntime.awrap(this.auth0Client.isAuthenticated());case 18:return this.isAuthenticated=a.sent,a.next=21,regeneratorRuntime.awrap(this.auth0Client.getUser());case 21:return this.user=a.sent,this.loading=!1,a.finish(15);case 24:case"end":return a.stop()}}),null,this,[[3,12,15,24]])}}),Ve)},Re={install:function(t,e){t.prototype.$auth=Se(e)}},je=function(t,e,n){var a=$e(),i=function(){if(a.isAuthenticated)return n();a.loginWithRedirect({appState:{targetUrl:t.fullPath}})};if(!a.loading)return i();a.$watch("loading",(function(t){if(!1===t)return i()}))};a["default"].use(z["a"]);var Pe=new z["a"]({mode:"history",base:"/thingy-client-purple/",routes:[{path:"/default",name:"home",component:Q},{path:"/",name:"Monitor",component:Ie,beforeEnter:je},{path:"/workflow",name:"Workflow",component:Yt,beforeEnter:je},{path:"/settings",name:"Settings",component:Ot,beforeEnter:je}]}),Ae=n("8160"),Ee=(n("99af"),Object({NODE_ENV:"production",BASE_URL:"/thingy-client-purple/"}).VUE_APP_THINGY_API,"http://35.233.66.177:8081"),Le={list:function(t,e){return tt.a.get("".concat(Ee,"/thing/").concat(t,"/properties"),e)},get:function(t,e,n){return tt.a.get("".concat(Ee,"/thing/").concat(t,"/property/").concat(e),n)}},Me={list:function(t){return tt.a.get("".concat(Ee,"/things"),t)},get:function(t,e){return tt.a.get("".concat(Ee,"/thing/").concat(t),e)},post:function(t){return tt.a.post("".concat(Ee,"/things"),t)},delete:function(t,e){return tt.a["delete"]("".concat(Ee,"/thing/").concat(t),e)}},Be={list:function(t){return tt.a.get("".concat(Ee,"/plants"),t)},post:function(t){return tt.a.post("".concat(Ee,"/plants"),t)},delete:function(t,e){return tt.a["delete"]("".concat(Ee,"/plant/").concat(t),e)},get:function(t,e){return tt.a.get("".concat(Ee,"/plant/").concat(t),e)},put:function(t,e){return tt.a.put("".concat(Ee,"/plant/").concat(t),e)},prediction:function(t,e){return tt.a.get("".concat(Ee,"/plant/").concat(t,"/prediction"),e)}},We={property:Le,thingys:Me,plants:Be},Ne=n("4452"),Ue=n.n(Ne);a["default"].prototype.$api=We,a["default"].use(Ue.a),a["default"].use(Re,{domain:Ae["c"],clientId:Ae["b"],audience:Ae["a"],onRedirectCallback:function(t){Pe.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}}),a["default"].config.productionTip=!1,new a["default"]({store:N,vuetify:F,router:Pe,config:{API_URL:Object({NODE_ENV:"production",BASE_URL:"/thingy-client-purple/"}).VUE_APP_THINGY_API},render:function(t){return t(M)}}).$mount("#app")},8160:function(t){t.exports=JSON.parse('{"c":"thingy-api-purple.eu.auth0.com","b":"r0gytMBKOv52W1wbyuKvfWCQt4272vmf","a":"thingy_api_purple"}')},"829c":function(t,e,n){},b4b3:function(t,e,n){"use strict";var a=n("829c"),i=n.n(a);i.a}});
//# sourceMappingURL=app.547b45f1.js.map